<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Synchronize video times — dv_sync_video • datavolley</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Raleway-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Patua_One-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Synchronize video times — dv_sync_video"><meta name="description" content="This function uses the time of each serve and some rules to align the other contacts in a rally with their (approximately correct) times in the corresponding match video. Warning: experimental!"><meta property="og:description" content="This function uses the time of each serve and some rules to align the other contacts in a rally with their (approximately correct) times in the corresponding match video. Warning: experimental!"><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">datavolley</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.14.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/datavolley.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openvolley/datavolley/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Synchronize video times</h1>
      <small class="dont-index">Source: <a href="https://github.com/openvolley/datavolley/blob/HEAD/R/video.R" class="external-link"><code>R/video.R</code></a></small>
      <div class="d-none name"><code>dv_sync_video.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function uses the time of each serve and some rules to align the other contacts in a rally with their (approximately correct) times in the corresponding match video. Warning: experimental!</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dv_sync_video</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">first_serve_contact</span>,</span>
<span>  freeball_dig_time_offset <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  contact_times <span class="op">=</span> <span class="fu">dv_sync_contact_times</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  offsets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">times_from</span>,</span>
<span>  enforce_order <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dv_sync_contact_times</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dv_sync_offsets</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>datavolley: a single datavolley object as returned by <code><a href="dv_read.html">dv_read</a></code></p></dd>


<dt id="arg-first-serve-contact">first_serve_contact<a class="anchor" aria-label="anchor" href="#arg-first-serve-contact"></a></dt>
<dd><p>numeric or string: the video time of the first serve contact. This can be a numeric value giving the time in seconds from the start of the video, or a string of the form "MM:SS" (minutes and seconds) or "HH:MM:SS" (hours, minutes and seconds)</p></dd>


<dt id="arg-freeball-dig-time-offset">freeball_dig_time_offset<a class="anchor" aria-label="anchor" href="#arg-freeball-dig-time-offset"></a></dt>
<dd><p>numeric: if non-NA, the clock times of freeball digs will be used directly in the synchronization process. Freeball digs will be aligned using their clock times relative to the first serve contact clock time, with this <code>freeball_dig_time_offset</code> value (in seconds) added. So if when scouting live you typically enter freeball digs one second after they happen, use <code>freeball_dig_time_offset = -1</code>. If <code>freeball_dig_time_offset</code> is NA, which is the default, the clock times of freeball digs will not be used in the synchronization process</p></dd>


<dt id="arg-contact-times">contact_times<a class="anchor" aria-label="anchor" href="#arg-contact-times"></a></dt>
<dd><p>list: a set of parameters that control the synchronization process. See Details, below</p></dd>


<dt id="arg-offsets">offsets<a class="anchor" aria-label="anchor" href="#arg-offsets"></a></dt>
<dd><p>list: a list set of offsets to be added to each contact time in the second step of the synchronization process. See Details, below. If <code>offsets</code> is NULL or an empty list, no offsets are applied</p></dd>


<dt id="arg-times-from">times_from<a class="anchor" aria-label="anchor" href="#arg-times-from"></a></dt>
<dd><p>string: either "clock" or "video": take the serve times (and freeball dig times, if <code>freeball_dig_time_offset</code> is non-NA) from clock or video times. By default, clock times are used unless they are all missing</p></dd>


<dt id="arg-enforce-order">enforce_order<a class="anchor" aria-label="anchor" href="#arg-enforce-order"></a></dt>
<dd><p>logical: the estimated contact times will always be time-ordered (the contact time of a given touch cannot be prior to the contact time of a preceding touch). But the offsets can be different for different skills, leading to final video times that are not time ordered. These will be fixed if <code>enforce_order</code> is TRUE</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>: name-value pairs of elements to override the defaults in <code>dv_sync_contact_times</code> and <code>dv_sync_offsets</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A copy of <code>x</code> with modified <code>video_time</code> values in its <code>plays</code> component</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When a match is scouted live, the clock time of each serve will usually be correct because the scout can enter the serve code at the actual time of serve. But the remainder of the touches in the rally might not be at their correct times if the scout can't keep up with the live action. This function makes some assumptions about typical contact-to-contact times to better synchronize the scouted contacts with the corresponding match video.</p>
<p>The clock time of each serve will be used as the reference time for each rally (unless the user specifies <code>times_from = "video"</code>). If clock times are not present in the file, the video time of each serve will be used instead. If those are also missing, the function will fail.</p>
<p>Freeball digs can optionally be treated in the same way as serves, with their scouted times used directly in the synchronization process. Obviously this only makes sense if the scout has actually been consistent in their timing when entering freeball digs, but assuming that is the case then setting the <code>freeball_dig_time_offset</code> to a non-NA value will improve the synchronization of rallies with freeballs. These rallies otherwise tend to synchronize poorly, because the play is messy and less predictable compared to in-system rallies.</p>
<p>Note that synchronization from clock times relies on the serve clock times in the file being consistent, and so it will only work if the match has been scouted in a single sitting (either live, or from video playback but without pausing/rewinding/fast-forwarding the video). If your clock times are not consistent but the video time of each serve is correct, then you can use the video time of each serve as the reference time instead.</p>
<p>The synchronization is a two-step process. In the first step, the video time of each scouted contact is estimated (i.e. the actual time that the player made contact with the ball). In the second step, skill-specific offsets are added to those contact times. This is important if your video montage software does not apply its own offsets, because you will normally want a video clip to start some seconds before the actual contact of interest. However, most video montage software - including the openvolley ovva package and Shiny app - provide their own offsets and so by default no offsets are applied here (this is a change: prior to June 2025 offsets were applied here by default).</p>
<p>The <code>contact_times</code> object contains a set of times (in seconds), which you can adjust to suit your scouting style and level of play. If you have an already-synchronized dvw file, the <code><a href="dv_sync_summary.html">dv_sync_summary</a></code> function can provide some guidance as to what these values should be. The <code>contact_times</code> object contains the following entries:</p><ul><li><p>SQ - time between the scouted serve time and actual serve contact for jump serves</p></li>
<li><p>SM - time between the scouted serve time and actual serve contact for jump-float serves</p></li>
<li><p>SO - time between the scouted serve time and actual serve contact for all other serves</p></li>
<li><p>SQ_R, SM_R, SO_R - the time between serve contact and reception contact for jump, jump-float, and other serves</p></li>
<li><p>R_E - the time between reception contact and set contact</p></li>
<li><p>EQ_A - the time between set contact and attack contact for quick sets</p></li>
<li><p>EH_A - the time between set contact and attack contact for high sets</p></li>
<li><p>EO_A - the time between set contact and attack contact for all other sets</p></li>
<li><p>A_B - the time between attack contact and block contact</p></li>
<li><p>A_D - the time between attack contact and dig contact (no intervening block touch)</p></li>
<li><p>A_B_D - the time between attack contact and dig contact (with block touch)</p></li>
<li><p>D_E - the time between dig contact and set contact</p></li>
<li><p>RDov - the time between reception or dig overpass contact and the next touch by the opposition</p></li>
<li><p>END - the time between the last contact and end-of-rally marker</p></li>
</ul><p>The <code>offsets</code> object defines the offset (in seconds) to be added to each contact time in the second pass of the synchronization process. It contains the entries "S" (serve), "R" (reception), "E" (set), "A" (attack), "D", (dig), "B" (block), and "F" (freeball). The <code>offsets</code> object can be constructed using the <code>dv_sync_offsets</code> function.</p>
<p>Note that the entries in <code>contact_times</code> and <code>offsets</code> can be fractions. The actual video time entries in the returned file are required to be integers and so the final values will be rounded, but using fractional values (particularly for the <code>contact_times</code> entries) can give better accuracy in the intermediate calculations.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="dv_sync_summary.html">dv_sync_summary</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="dv_read.html">dv_read</a></span><span class="op">(</span><span class="fu"><a href="dv_example_file.html">dv_example_file</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## first serve contact was at 54s in the video</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">dv_sync_video</span><span class="op">(</span><span class="va">x</span>, first_serve_contact <span class="op">=</span> <span class="fl">54</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>the plays component of `x` is missing at least one `time` entry on serves</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## with a custom configuration</span></span></span>
<span class="r-in"><span><span class="va">my_contact_times</span> <span class="op">&lt;-</span> <span class="fu">dv_sync_contact_times</span><span class="op">(</span>SQ <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co">## override default entries as necessary</span></span></span>
<span class="r-in"><span><span class="co">## first serve contact was at 3:35 in the video</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">dv_sync_video</span><span class="op">(</span><span class="va">x</span>, first_serve_contact <span class="op">=</span> <span class="st">"3:35"</span>, contact_times <span class="op">=</span> <span class="va">my_contact_times</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>the plays component of `x` is missing at least one `time` entry on serves</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ben Raymond, Adrien Ickowicz, Tyler Widdison.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

